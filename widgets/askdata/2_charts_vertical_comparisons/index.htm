<html>
<head>
<!-- Beginning Include Header -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<script src="/lib/scripts/utils.js"></script>
<script src="/lib/scripts/env.js"></script>
<script src="/lib/scripts/jquery.min.js"></script>
<link href="/lib/styles/css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/lib/styles/style.css">
<script src="https://unpkg.com/mustache@latest"></script>
<script type="text/javascript">
var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
};
</script>
<!-- End Include Header -->

  <script>

// Retrieve auth token for URL of from the Cookies
if (getUrlParameter('token') != undefined){
  var token = getUrlParameter('token');
}else{
  var token = Cookies.get('access_token')
}

</script>

     <link rel="preconnect" href="https://fonts.gstatic.com"> <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

</head>


<body>
<div id="target">Failed Loading widget. Check your inputs.</div>

    <script>

// Request charting data
$.ajax({
       url: "https://api-dev.askdata.com"+"/smartinsight/widgets/" + getUrlParameter('widgetId'),
       type: "GET",
       async: false,
       beforeSend: (xhr) => setAuthHeader(xhr),
       success: function(data) { 

        $( "#target" ).replaceWith( '<div style="width:100%" id="first_chart"><iframe style="width:50%;border:0;height:100%" src="https://chart-dev.askdata.com/charts/askdata/horizontal_bar/index.htm?chartId=5fa032b053ceb555c449ebc7"></iframe></div>' );

        $( "#first_chart" ).append('<iframe style="width:50%;border:0;height:100%" src="https://chart-dev.askdata.com/charts/askdata/horizontal_bar/index.htm?chartId=5fa032b053ceb555c449ebc7"></iframe>')

  }
  }); 

/*
// Redirect to login if not authenticated 
$(document).ajaxError(function( event, jqxhr, settings, exception ) {
    if ( jqxhr.status== 401 ) {
      location.replace(environment_auth+"/login");

    }
});
*/

  </script>
</body>

