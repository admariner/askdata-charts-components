<!--
    THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=pictorialBar-spirit
-->
<!DOCTYPE html>
<html style="height: 100%">
    <head>
        <meta charset="utf-8">
    </head>
    <body style="height: 100%; margin: 0">
        <div id="container" style="height: 100%"></div>

        
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/dist/echarts.min.js"></script>
        <!-- Uncomment this line if you want to dataTool extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/dist/extension/dataTool.min.js"></script>
        -->
        <!-- Uncomment this line if you want to use gl extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
        -->
        <!-- Uncomment this line if you want to echarts-stat extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
        -->
        <!-- Uncomment this line if you want to use map
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/map/js/china.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/map/js/world.js"></script>
        -->
        <!-- Uncomment these two lines if you want to use bmap extension
        <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=<Your Key Here>"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@{{version}}/dist/extension/bmap.min.js"></script>
        -->

        <script type="text/javascript">
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};

var option;




try{
  var icona = data.ecc
  var spirit ='image://' + icona
}
catch(error){
   var spirit ='image://https://s3.eu-central-1.amazonaws.com/innaas.smartfeed/icons/circle_green_lisghter.png'
}



try{
  var backgroundcolor = data.ecc
}
catch(error){
  var backgroundcolor = "#000000"
}


var dates = ['Ago 21', 'Sett 21', 'Ott 21', 'Nov 21', 'Dic 21', "Gen 21"]
var quantities = [891, 1220, 660, 1670, 1000, 1000]
var somma = quantities.reduce((partialSum, a) => partialSum + a, 0);

var maxData = Math.max(...quantities) + Math.max(...quantities)*1/10 ;
option = {
   title: {
    text: "Segnalazioni chiuse " + somma,
    top: 35,
    left: "center",
    color: "white",
    textStyle: {
      color: "white",
      fontSize: 30
    },
   },
  backgroundColor: backgroundcolor,
  tooltip: {},
  xAxis: {
    
    max: maxData,
    splitLine: { show: false },
    offset: 10,
    axisLine: {
      lineStyle: {
        color: '#999'
      }
    },
    axisLabel: {
      color:"white",
      margin: 3
    }
  },
  yAxis: {
    data: dates,
    inverse: true,
    axisTick: { show: false },
    axisLine: { show: false },
    axisLabel: {
      margin: 10,
      color: '#ffffff',
      fontSize: 16
    }
  },
  grid: {
    top: 90,
    height: 190,
    left: 112,
    right: 112,
    
  },
  series: [
    {
      // current data
      type: 'pictorialBar',
      symbol: spirit,
      symbolRepeat: 'fixed',
      symbolMargin: '5%',
      symbolClip: true,
      color: '#ffffff',
      symbolSize: 30,
      symbolBoundingData: maxData,
      data: quantities,
      markLine: {
        symbol: 'none',
        label: {
          opacity: 1,
          color: '#ffffff',
          formatter: 'max: {c}',
          position: 'start'
        },
        lineStyle: {
          color: '#ffffff',
          type: 'dotted',
          opacity: 0.2,
          width: 2
        },
        data: [
          {
            type: 'max'
          }
        ]
      },
      z: 10
    },
    {
      // full data
      type: 'pictorialBar',
      itemStyle: {
        opacity: 0.2
      },
      label: {
        show: true,
        formatter: function (params) {
          return ((params.value / maxData) * 100).toFixed(1) + ' %';
        },
        position: 'right',
        offset: [10, 0],
        opacity: 1,
        color: 'white',
        fontSize: 18
      },
      animationDuration: 0,
      symbolRepeat: 'fixed',
      symbolMargin: '5%',
      symbol: spirit,
      symbolSize: 30,
      symbolBoundingData: maxData,
      data: quantities,
      z: 5
    }
  ]
};



if (option && typeof option === 'object') {
    myChart.setOption(option);
}

        </script>
    </body>
</html>
    